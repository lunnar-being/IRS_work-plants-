{"version":3,"file":"RangeInput.vue.js","sources":["../../../src/components/RangeInput.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"state\"\n    :class=\"[suit(), !canRefine && suit('', 'noRefinement')]\"\n  >\n    <slot\n      :current-refinement=\"values\"\n      :refine=\"refine\"\n      :can-refine=\"canRefine\"\n      :range=\"state.range\"\n      :send-event=\"state.sendEvent\"\n    >\n      <form\n        :class=\"suit('form')\"\n        @submit.prevent=\"refine({ min: pick(minInput, values.min), max: pick(maxInput, values.max) })\"\n      >\n        <label :class=\"suit('label')\">\n          <slot name=\"minLabel\" />\n          <input\n            type=\"number\"\n            :class=\"[suit('input'), suit('input', 'min')]\"\n            :step=\"step\"\n            :min=\"state.range.min\"\n            :max=\"state.range.max\"\n            :placeholder=\"state.range.min\"\n            :value=\"values.min\"\n            @change=\"minInput = $event.currentTarget.value\"\n          >\n        </label>\n        <span :class=\"suit('separator')\">\n          <slot name=\"separator\">to</slot>\n        </span>\n        <label :class=\"suit('label')\">\n          <slot name=\"maxLabel\" />\n          <input\n            :class=\"[suit('input'), suit('input', 'max')]\"\n            type=\"number\"\n            :step=\"step\"\n            :min=\"state.range.min\"\n            :max=\"state.range.max\"\n            :placeholder=\"state.range.max\"\n            :value=\"values.max\"\n            @change=\"maxInput = $event.currentTarget.value\"\n          >\n        </label>\n        <button\n          :class=\"suit('submit')\"\n          type=\"submit\"\n        >\n          <slot name=\"submitLabel\">Go</slot>\n        </button>\n      </form>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectRange } from 'instantsearch.js/es/connectors';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { createPanelConsumerMixin } from '../mixins/panel';\nimport { createSuitMixin } from '../mixins/suit';\n\nconst mapStateToCanRefine = state =>\n  state && Boolean(state.range) && state.range.min !== state.range.max;\n\nexport default {\n  name: 'AisRangeInput',\n  mixins: [\n    createSuitMixin({ name: 'RangeInput' }),\n    createWidgetMixin({ connector: connectRange }),\n    createPanelConsumerMixin({\n      mapStateToCanRefine,\n    }),\n  ],\n  props: {\n    attribute: {\n      type: String,\n      required: true,\n    },\n    min: {\n      type: Number,\n      required: false,\n      default: -Infinity,\n    },\n    max: {\n      type: Number,\n      required: false,\n      default: Infinity,\n    },\n    precision: {\n      type: Number,\n      required: false,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      minInput: undefined,\n      maxInput: undefined,\n    };\n  },\n  updated() {\n    this.minInput = undefined;\n    this.maxInput = undefined;\n  },\n  computed: {\n    widgetParams() {\n      return {\n        attribute: this.attribute,\n        min: this.min,\n        max: this.max,\n        precision: this.precision,\n      };\n    },\n    canRefine() {\n      return mapStateToCanRefine(this.state);\n    },\n    step() {\n      return 1 / Math.pow(10, this.precision);\n    },\n    values() {\n      const [minValue, maxValue] = this.state.start;\n      const { min: minRange, max: maxRange } = this.state.range;\n\n      return {\n        min:\n          minValue !== -Infinity && minValue !== minRange\n            ? minValue\n            : undefined,\n        max:\n          maxValue !== Infinity && maxValue !== maxRange ? maxValue : undefined,\n      };\n    },\n  },\n  methods: {\n    pick(first, second) {\n      if (first !== null && first !== undefined) {\n        return first;\n      } else {\n        return second;\n      }\n    },\n    refine({ min, max }) {\n      this.state.refine([min, max]);\n    },\n  },\n};\n</script>\n"],"names":["const","mapStateToCanRefine","state","Boolean","range","min","max","render","name","mixins","createSuitMixin","createWidgetMixin","connector","connectRange","createPanelConsumerMixin","props","attribute","type","String","required","Number","default","Infinity","precision","data","minInput","undefined","maxInput","updated","this","computed","widgetParams","canRefine","step","Math","pow","values","start","minValue","minRange","maxValue","maxRange","methods","pick","first","second","refine","ref"],"mappings":"wOA8DAA,IAAMC,WAAsBC,UAC1BA,GAASC,QAAQD,EAAME,QAAUF,EAAME,MAAMC,MAAQH,EAAME,MAAME,mBAEpD,CAACC,myCACdC,KAAM,gBACNC,OAAQ,CACNC,EAAgB,CAAEF,KAAM,eACxBG,EAAkB,CAAEC,UAAWC,IAC/BC,EAAyB,qBACvBb,KAGJc,MAAO,CACLC,UAAW,CACTC,KAAMC,OACNC,UAAU,GAEZd,IAAK,CACHY,KAAMG,OACND,UAAU,EACVE,SAAUC,EAAAA,GAEZhB,IAAK,CACHW,KAAMG,OACND,UAAU,EACVE,QAASC,EAAAA,GAEXC,UAAW,CACTN,KAAMG,OACND,UAAU,EACVE,QAAS,IAGbG,gBACE,MAAO,CACLC,cAAUC,EACVC,cAAUD,IAGdE,mBACEC,KAAKJ,cAAWC,EAChBG,KAAKF,cAAWD,GAElBI,SAAU,CACRC,wBACE,MAAO,CACLf,UAAWa,KAAKb,UAChBX,IAAKwB,KAAKxB,IACVC,IAAKuB,KAAKvB,IACViB,UAAWM,KAAKN,YAGpBS,qBACE,OAAO/B,EAAoB4B,KAAK3B,QAElC+B,gBACE,OAAO,EAAIC,KAAKC,IAAI,GAAIN,KAAKN,YAE/Ba,kBACE,MAA6BP,KAAK3B,MAAMmC,sBACCR,KAAK3B,MAAME,sBAEpD,MAAO,CACLC,IACEiC,KAAchB,EAAAA,GAAYgB,IAAaC,EACnCD,OACAZ,EACNpB,IACEkC,IAAalB,EAAAA,GAAYkB,IAAaC,EAAWD,OAAWd,KAIpEgB,QAAS,CACPC,cAAKC,EAAOC,GACV,OAAID,MAAAA,EACKA,EAEAC,GAGXC,gBAAOC,uBACLlB,KAAK3B,MAAM4C,OAAO,CAACzC,EAAKC"}